@page "/perfil/gerenciamentocontas/instagram/token"
@using Microsoft.EntityFrameworkCore
@inject SmartSale.Data.ApplicationDbContext _contexto
@model TokenInstagramModel
@{
    Layout = null;
    ViewData["Title"] = "Entrar";
    var _appconfig = new SmartSale.Models.AppConfiguracoes();
    try
    {
        _appconfig = _contexto.AppConfiguracoes.Include(x => x.AppConfiguracoes_Aplicativo).Include(y => y.AppConfiguracoes_Azure).FirstOrDefault();
    }
    catch (Exception) { }
}

@*
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script>
        WebFont.load({
            google: { "families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"] },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>
    <link rel="stylesheet" href="/temas/cms/vendor/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/temas/cms/vendor/fontawesome-free-5.6.3-web/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,800" />
    <link rel="stylesheet" href="/temas/cms/css/orionicons.css" />
    <link rel="stylesheet" href="/temas/cms/css/style.default.css" id="theme-stylesheet" />
    <link rel="stylesheet" href="/temas/cms/css/component.css" id="theme-stylesheet" />
    <link rel="stylesheet" href="/temas/cms/vendor/sweetalert/sweetalert.css" />
    <link rel="stylesheet" href="/temas/cms/css/codemirror.css" />
    <link rel="stylesheet" href="/lib/bootstrap-select/dist/css/bootstrap-select.css" type="text/css">
    <link rel="stylesheet" href="/lib/select2/dist/css/select2.css" type="text/css">
    <link rel="stylesheet" href="/temas/cms/css/custom.css" />
    <style>
        .card {
            background-color: #fff;
            border: none;
            -webkit-box-shadow: 0 0.125rem 0.8rem rgba(0, 0, 0, 0) !important;
            box-shadow: 0 0.125rem 0.8rem rgba(0, 0, 0, 0) !important;
            border-radius: 0px !important;
        }
    </style>
    <div class="card">
        <div class="card-header">
            <h6 class="text-uppercase mb-0">
                <i class="o-clock-1 mr-3 text-gray"></i> Comunicação com o Instagram
            </h6>
        </div>
        <div class="card-body">
            <div class="col-12 text-center ">
                <div class="img-logotipo-login">
                    <div class="row">
                        <div class="col-5">
                            <img src="/images/instagram-png.png" alt="/images/instagram-png.png" style="max-width:100%;height:80px;border-radius:100%;">
                        </div>
                        <div class="col-2">
                            <i class="fas fa-exchange-alt" style="font-size:30px;color:grey;margin-top:50px;"></i>
                        </div>
                        <div class="col-5">
                            <a asp-area="Identity" asp-page="/Account/Manage/Index">
                                <img src="@Model.Usuario.AvatarUsuario" alt="@Model.Usuario.AvatarUsuario" style="max-width:100%;height:80px;border-radius:100%;">
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <code id="token" name="token" style="font-size:30px;font-weight:lighter;line-height:30px;">
                            <h1 class="text-danger"><img src="/images/mega_menu_208_149.gif" /> </h1>
                        </code>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/temas/cms/vendor/jquery/jquery.min.js"></script>
    <script>
        jQuery(document).ready(function () {
            if (window.location.hash) {
                var hash = window.location.hash.substring(1);
                $.ajax("/api/sistema/obtertokeninstagram?token=" + hash)
                    .done(function (retorno) {
                        $("#token").html(retorno.dados + (retorno.status === 'erro' ? "<h1 class='text-danger'>RECARREGUE ESSA PÁGINA!!!</h1><a href='/Identity/Account/Manage/GerenciamentoRedesSociais' target='_blank' class='btn btn-success'> CLICK AQUI PARA AJUSTAR ISSO</a>" : ""));
                    });
            } else {
                $("#token").html("<h1 class='text-danger'>DESCONECTADO</h1><a href='/Identity/Account/Manage/GerenciamentoRedesSociais' class='btn btn-danger'>AJUSTAR ISSO</a>");
            }
        });
    </script>
*@


@*@section Scripts {
        @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
        <script>
            //jQuery(document).ready(function () {
            if (window.location.hash) {
                var hash = window.location.hash.substring(1);
                $.ajax("/api/sistema/obtertokeninstagram?token=" + hash)
                    .done(function (retorno) {
                        $("#token").html(retorno.dados);
                    });
            } else {
                //window.location.href = "/";
            }
                    //});
        </script>
    }*@

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Smart Sale - Conectando ao Instagram</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="all,follow" />
    <meta name="description" content="@_appconfig.AppConfiguracoes_Aplicativo.Empresa">
    <meta name="author" content="@_appconfig.AppConfiguracoes_Aplicativo.Empresa">
    <link rel="shortcut icon" href="/images/avatar-e2e.png" />
    <title>@_appconfig.AppConfiguracoes_Aplicativo.Empresa - @ViewData["Title"]</title>
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
    <script>
        WebFont.load({
            google: { "families": ["Poppins:300,400,500,600,700", "Roboto:300,400,500,600,700"] },
            active: function () {
                sessionStorage.fonts = true;
            }
        });
    </script>
    <link rel="stylesheet" href="/temas/cms/vendor/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,800" />
    <link rel="stylesheet" href="/temas/cms/css/orionicons.css" />
    <link rel="stylesheet" href="/temas/cms/css/style.default.css" id="theme-stylesheet" />
    <link rel="stylesheet" href="/temas/cms/css/custom.css" />
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
    <style>
        body {
            background-image: url(/images/Docs/Elementos/imagem-fundo-login.png);
            background-repeat: no-repeat;
            background-position: -60px top;
            background-attachment: fixed;
            background-color: #fff;
        }

        @@media screen and (min-width:150px) and (max-width:1150px) {
            body {
                background-image: url(/images/Docs/Elementos/imagem-fundo-login-transp.png);
                background-repeat: no-repeat;
                background-position: -60px top;
                background-attachment: fixed;
                background-color: #fff;
            }

            .divloginprincipal {
                padding-top: 40px;
            }
        }

        .page-holder {
            margin-left: initial !important;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="page-holder d-flex align-items-center">
        <div class="container">
            <div class="row justify-content-center align-items-center pb-4">
                <div class="col-12 text-center ">
                    <div class="img-logotipo-login">
                        <div class="row">
                            <div class="col-5">
                                <img src="/images/instagram-png.png" alt="/images/instagram-png.png" style="max-width:100%;height:160px;border-radius:100%;">
                            </div>
                            <div class="col-2">
                                <i class="fas fa-exchange-alt" style="font-size:30px;color:grey;margin-top:50px;"></i>
                            </div>
                            <div class="col-5">
                                <a asp-area="Identity" asp-page="/Account/Manage/Index">
                                    <img src="@Model.Usuario.AvatarUsuario" alt="@Model.Usuario.AvatarUsuario" style="max-width:100%;height:160px;border-radius:100%;">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            @*<code id="token" name="token" style="font-size:30px;font-weight:lighter;line-height:30px;"><img src="~/images/mega_menu_208_149.gif" /> </code>*@
                            <code id="token" name="token" style="font-size:30px;font-weight:lighter;line-height:30px;">
                                <h1 class="text-danger"><img src="/images/mega_menu_208_149.gif" /> </h1>
                            </code>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/temas/cms/vendor/jquery/jquery.min.js"></script>
    <script src="/temas/cms/vendor/popper.js/umd/popper.min.js"></script>
    <script src="/temas/cms/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="/temas/cms/vendor/jquery.cookie/jquery.cookie.js"></script>
    <script src="/temas/cms/vendor/chart.js/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="/temas/cms/js/front.js"></script>
    <script>
        //if (window.location.hash) {
        //    var hash = window.location.hash.substring(1);
        //    $.ajax("/api/sistema/obtertokeninstagram?token=" + hash)
        //        .done(function (retorno) {
        //            $("#token").html(retorno.dados);
        //        });
        //} else {
        //    window.location.href = "/";
        //}
        jQuery(document).ready(function () {
            if (window.location.hash) {
                var hash = window.location.hash.substring(1);
                $.ajax("/api/sistema/obtertokeninstagram?token=" + hash)
                    .done(function (retorno) {
                        $("#token").html(retorno.dados + (retorno.status === 'erro' ? "<h1 class='text-danger'>RECARREGUE ESSA PÁGINA!!!</h1><a href='/Identity/Account/Manage/GerenciamentoRedesSociais' target='_blank' class='btn btn-success'> CLICK AQUI PARA AJUSTAR ISSO</a>" : ""));
                    });
            } else {
                $("#token").html("<h1 class='text-danger'>DESCONECTADO</h1><a href='/Identity/Account/Manage/GerenciamentoRedesSociais' class='btn btn-danger'>AJUSTAR ISSO</a>");
            }
        });
    </script>
</body>
</html>